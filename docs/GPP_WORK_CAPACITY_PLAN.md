# GPP Work Capacity Exercise System - Implementation Plan

## Overview

This document outlines the plan for implementing a comprehensive work capacity/conditioning exercise system for the Wander-Fit app. Work capacity training is a critical component of GPP (General Physical Preparedness) that develops the athlete's ability to perform and recover from training volume.

**Goal**: Create a sport-relevant work capacity system that:
1. Develops athletic qualities specific to each GPP category
2. Progresses appropriately based on age and experience
3. Integrates seamlessly with the existing Day 3 (Power/Conditioning) structure

---

## 1. Work Capacity Exercise Categories

### 1.1 Equipment-Based Conditioning

| Exercise Type | Equipment Required | Primary Adaptations |
|---------------|-------------------|---------------------|
| **Sled Work** | Sled/Prowler | Lower body power-endurance, hip extension |
| **Battle Ropes** | Battle Ropes | Upper body endurance, grip, core stability |
| **Ski Erg** | Ski Erg Machine | Full-body pulling power, aerobic capacity |
| **Rower** | Rowing Machine | Posterior chain endurance, aerobic power |
| **Assault Bike** | Air Bike | Total body conditioning, lactate tolerance |
| **Loaded Carries** | DB/KB/Trap Bar | Core stability, grip, work capacity |

### 1.2 Bodyweight Conditioning (No Equipment Alternatives)

| Exercise Type | Alternative For | Primary Adaptations |
|---------------|----------------|---------------------|
| **Bear Crawl Variations** | Sled Push | Core stability, coordination |
| **Burpee Variations** | Assault Bike | Full-body conditioning |
| **Mountain Climber Intervals** | Battle Ropes | Core endurance, hip mobility |
| **Sprint Intervals** | Ski Erg/Rower | Speed endurance, power |
| **Jumping Rope** | Any cardio machine | Coordination, aerobic capacity |

### 1.3 Circuit Training Protocols

Structured combinations of exercises performed in sequence with minimal rest:

| Circuit Type | Structure | Best For |
|--------------|-----------|----------|
| **EMOM** (Every Minute On the Minute) | Fixed work each minute | Pacing, power-endurance |
| **AMRAP** (As Many Rounds As Possible) | Max rounds in time cap | Work capacity, mental toughness |
| **Tabata** | 20s work / 10s rest × 8 | Anaerobic capacity |
| **Ladder** | Ascending/descending reps | Progressive overload |
| **Density Blocks** | Fixed work, minimize rest | Work capacity improvement |

---

## 2. Sport-Category Mapping

Each GPP category emphasizes different work capacity modalities based on sport demands:

### Category 1: Continuous/Directional (Endurance)
**Sports**: Soccer, Field Hockey, Lacrosse, Rugby, Cross Country

| Priority | Exercise Types | Rationale |
|----------|---------------|-----------|
| **Primary** | Shuttle runs, tempo runs, ski erg | Aerobic capacity with direction changes |
| **Secondary** | Sled push/pull, assault bike | Hip extension endurance |
| **Tertiary** | Battle ropes, loaded carries | Upper body work capacity |

**Work Capacity Focus**:
- High volume, moderate intensity
- Emphasis on repeat sprint ability
- Aerobic-anaerobic crossover
- Direction change conditioning

**Sample Prescription**:
```
Week 1-2: 3-4 × 200m tempo runs @ 70% effort
Week 3-4: 5-6 × 150m shuttle sprints with direction changes
```

---

### Category 2: Explosive/Vertical (Power)
**Sports**: Basketball, Volleyball, Track (Sprints/Jumps), Gymnastics

| Priority | Exercise Types | Rationale |
|----------|---------------|-----------|
| **Primary** | Assault bike intervals, jump rope | Power-endurance without joint stress |
| **Secondary** | Sled sprints, med ball circuits | Explosive repeat ability |
| **Tertiary** | Rower sprints, battle ropes | Recovery between explosive bouts |

**Work Capacity Focus**:
- Short, intense intervals
- Full recovery between sets
- Power maintenance under fatigue
- Landing/jumping volume management

**Sample Prescription**:
```
Week 1-2: 6 × 15s assault bike sprints / 45s rest
Week 3-4: 8 × 20s assault bike sprints / 40s rest
```

---

### Category 3: Rotational/Unilateral (Rotation)
**Sports**: Baseball, Softball, Tennis, Golf, Cricket

| Priority | Exercise Types | Rationale |
|----------|---------------|-----------|
| **Primary** | Med ball circuits, rotational carries | Rotational power-endurance |
| **Secondary** | Battle ropes (alternating), asymmetric carries | Unilateral conditioning |
| **Tertiary** | Rower, ski erg | Pulling power base |

**Work Capacity Focus**:
- Rotational movement patterns
- Asymmetric loading tolerance
- Anti-rotation endurance
- Thoracic mobility maintenance

**Sample Prescription**:
```
Week 1-2: 3 × (8 rotational throws + 40m suitcase carry each side)
Week 3-4: 4 × (10 rotational throws + 60m suitcase carry each side)
```

---

### Category 4: General Strength (Strength)
**Sports**: Football, Wrestling, Ice Hockey, Swimming, Martial Arts

| Priority | Exercise Types | Rationale |
|----------|---------------|-----------|
| **Primary** | Sled push/pull, heavy carries | Strength-endurance, grappling base |
| **Secondary** | Battle ropes, assault bike | Upper body work capacity |
| **Tertiary** | Ski erg, rower | Pulling endurance for grappling |

**Work Capacity Focus**:
- High-force output under fatigue
- Grip endurance
- Sustained strength application
- Work capacity with load

**Sample Prescription**:
```
Week 1-2: 4 × 30m heavy sled push + 30m farmer's carry
Week 3-4: 5 × 40m heavy sled push + 40m farmer's carry
```

---

## 3. Progression System

### 3.1 Phase-Based Intensity Progression

| Phase | Work Capacity Focus | Intensity | Volume | Rest Ratios |
|-------|---------------------|-----------|--------|-------------|
| **GPP** | Build aerobic base, movement quality | Low-Moderate | Higher | 1:2 to 1:3 |
| **SPP** | Sport-specific conditioning | Moderate-High | Moderate | 1:1 to 1:2 |
| **SSP** | Maintain, peaking prep | High, reduced volume | Lower | Full recovery |

### 3.2 Week-Based Volume Progression

Follows existing week volume multipliers:

| Week | Volume | Focus |
|------|--------|-------|
| Week 1 | 70% | Introduction, movement quality |
| Week 2 | 85% | Build volume and intensity |
| Week 3 | 100% | Peak conditioning stimulus |
| Week 4 | 60% | Deload, recovery emphasis |

### 3.3 Age-Based Modifications

#### Age Group: 10-13

| Parameter | Modification | Rationale |
|-----------|--------------|-----------|
| Intensity Ceiling | Moderate only | Developing systems |
| Work Duration | Max 20-30 seconds | Attention, safety |
| Rest Periods | 1.5x standard | Full recovery |
| Equipment Weight | Bodyweight preferred | Movement quality focus |
| Plyometric Volume | Reduced contacts | Joint protection |

**Allowed Exercises**:
- Bodyweight circuits
- Light sled work
- Jump rope
- Short shuttle runs
- Modified battle ropes (lighter)

**Avoided/Modified**:
- Heavy carries (use light goblet carries)
- Assault bike at max intensity
- Extended AMRAP protocols

---

#### Age Group: 14-17

| Parameter | Modification | Rationale |
|-----------|--------------|-----------|
| Intensity Ceiling | High | Trainable, but monitored |
| Work Duration | 30-45 seconds | Building tolerance |
| Rest Periods | 1x standard | Normal recovery |
| Equipment Weight | Progressive loading | Strength building phase |
| Plyometric Volume | Standard contacts | Joint tolerance developed |

**Full Exercise Access**:
- All conditioning modalities
- Progressive loading on carries
- Full circuit protocols
- Moderate-heavy sled work

---

#### Age Group: 18+

| Parameter | Modification | Rationale |
|-----------|--------------|-----------|
| Intensity Ceiling | Maximum | Fully developed |
| Work Duration | Full protocols | Tolerance built |
| Rest Periods | 0.75-1x standard | Higher work capacity |
| Equipment Weight | Maximum appropriate | Peak development |
| Plyometric Volume | Full | Mature systems |

---

### 3.4 Experience-Based Modifications

| Skill Level | Volume Adjustment | Complexity | Rest Adjustment |
|-------------|-------------------|------------|-----------------|
| **Novice** (0-1 yrs) | 0.75x | Basic exercises, simple protocols | +25% rest |
| **Moderate** (1-3 yrs) | 1.0x | Full exercise selection, standard protocols | Standard rest |
| **Advanced** (3+ yrs) | 1.25x | Complex circuits, density training | -15% rest |

---

## 4. New Exercises to Add

### 4.1 Battle Rope Exercises

```typescript
{
  name: "Battle Rope Alternating Waves",
  slug: "battle_rope_alternating_waves",
  tags: ["full_body", "conditioning", "upper_body", "core", "grip_endurance"],
  equipment: ["battle_ropes"],
  difficulty: "beginner",
  instructions: "Hold rope ends, create alternating up-down waves. Maintain athletic stance with slight knee bend. Focus on rhythm and amplitude.",
  progressions: {
    harder: "battle_rope_double_waves"
  }
}

{
  name: "Battle Rope Double Waves",
  slug: "battle_rope_double_waves",
  tags: ["full_body", "conditioning", "upper_body", "power", "grip_endurance"],
  equipment: ["battle_ropes"],
  difficulty: "intermediate",
  instructions: "Both arms move together creating synchronized waves. More power demand than alternating.",
  progressions: {
    easier: "battle_rope_alternating_waves",
    harder: "battle_rope_slams"
  }
}

{
  name: "Battle Rope Slams",
  slug: "battle_rope_slams",
  tags: ["full_body", "conditioning", "power", "explosive", "core"],
  equipment: ["battle_ropes"],
  difficulty: "intermediate",
  instructions: "Explosively lift ropes overhead and slam down. Full body extension to flexion. High power output.",
  progressions: {
    easier: "battle_rope_double_waves"
  }
}

{
  name: "Battle Rope Side-to-Side Waves",
  slug: "battle_rope_side_waves",
  tags: ["full_body", "conditioning", "rotation", "core", "anti_rotation"],
  equipment: ["battle_ropes"],
  difficulty: "intermediate",
  instructions: "Create lateral wave pattern moving ropes side to side. Engages obliques and rotational stability."
}
```

### 4.2 Ski Erg Exercises

```typescript
{
  name: "Ski Erg Pull",
  slug: "ski_erg_pull",
  tags: ["full_body", "conditioning", "pull", "posterior_chain", "aerobic_capacity"],
  equipment: ["ski_erg"],
  difficulty: "beginner",
  instructions: "Stand facing erg, grip handles overhead. Pull down in powerful arc, hinging at hips and engaging lats. Return to start with control.",
  progressions: {
    harder: "ski_erg_intervals"
  }
}

{
  name: "Ski Erg Intervals",
  slug: "ski_erg_intervals",
  tags: ["full_body", "conditioning", "power", "posterior_chain", "aerobic_capacity"],
  equipment: ["ski_erg"],
  difficulty: "intermediate",
  instructions: "High-intensity pulling intervals. Focus on powerful pulls with brief recovery periods.",
  progressions: {
    easier: "ski_erg_pull"
  }
}
```

### 4.3 Assault Bike Exercises

```typescript
{
  name: "Assault Bike Steady State",
  slug: "assault_bike_steady",
  tags: ["full_body", "conditioning", "aerobic_capacity"],
  equipment: ["assault_bike"],
  difficulty: "beginner",
  instructions: "Maintain consistent moderate pace. Use both arms and legs for full body engagement.",
  progressions: {
    harder: "assault_bike_intervals"
  }
}

{
  name: "Assault Bike Intervals",
  slug: "assault_bike_intervals",
  tags: ["full_body", "conditioning", "power", "explosive"],
  equipment: ["assault_bike"],
  difficulty: "intermediate",
  instructions: "Maximum effort sprints followed by active recovery. Push and pull arms while driving legs.",
  progressions: {
    easier: "assault_bike_steady"
  }
}
```

### 4.4 Rower Exercises

```typescript
{
  name: "Rowing Machine Steady State",
  slug: "rower_steady",
  tags: ["full_body", "conditioning", "pull", "posterior_chain", "aerobic_capacity"],
  equipment: ["rower"],
  difficulty: "beginner",
  instructions: "Maintain consistent stroke rate (18-24 SPM). Drive with legs, lean back, pull to chest. Control the return.",
  progressions: {
    harder: "rower_intervals"
  }
}

{
  name: "Rowing Machine Intervals",
  slug: "rower_intervals",
  tags: ["full_body", "conditioning", "power", "explosive"],
  equipment: ["rower"],
  difficulty: "intermediate",
  instructions: "High-intensity rowing sprints. Increase stroke rate to 28-32+ SPM during work intervals.",
  progressions: {
    easier: "rower_steady"
  }
}
```

### 4.5 Jump Rope Exercises

```typescript
{
  name: "Jump Rope Basic",
  slug: "jump_rope_basic",
  tags: ["full_body", "conditioning", "coordination", "aerobic_capacity"],
  equipment: ["jump_rope"],
  difficulty: "beginner",
  instructions: "Two-foot bounce, one jump per rope rotation. Stay on balls of feet with minimal knee bend.",
  progressions: {
    harder: "jump_rope_high_knees"
  }
}

{
  name: "Jump Rope High Knees",
  slug: "jump_rope_high_knees",
  tags: ["full_body", "conditioning", "coordination", "hip_flexor"],
  equipment: ["jump_rope"],
  difficulty: "intermediate",
  instructions: "Alternate lifting knees high while jumping rope. Increases cardiovascular demand and hip flexor engagement.",
  progressions: {
    easier: "jump_rope_basic",
    harder: "jump_rope_double_unders"
  }
}

{
  name: "Jump Rope Double Unders",
  slug: "jump_rope_double_unders",
  tags: ["full_body", "conditioning", "power", "coordination", "reactive"],
  equipment: ["jump_rope"],
  difficulty: "advanced",
  instructions: "Rope passes under feet twice per jump. Requires higher jump and faster wrist rotation.",
  progressions: {
    easier: "jump_rope_high_knees"
  }
}
```

---

## 5. Circuit Protocol Templates

### 5.1 EMOM Templates by Category

#### Category 1: Endurance EMOM (12 min)
```
Minute 1: 10 Kettlebell Swings
Minute 2: 8 Shuttle Sprints (10m)
Minute 3: 12 Battle Rope Waves (alternating)
Minute 4: 30s Ski Erg Pull
(Repeat 3x)
```

#### Category 2: Power EMOM (10 min)
```
Minute 1: 5 Box Jumps
Minute 2: 8 Med Ball Slams
Minute 3: 15s Assault Bike Sprint
Minute 4: 8 Broad Jumps
Minute 5: 30s Jump Rope
(Repeat 2x)
```

#### Category 3: Rotation EMOM (12 min)
```
Minute 1: 6 Rotational Med Ball Throws (each side)
Minute 2: 40m Suitcase Carry (switch at 20m)
Minute 3: 10 Battle Rope Side Waves
Minute 4: 8 Cable Woodchops (each side)
(Repeat 3x)
```

#### Category 4: Strength EMOM (15 min)
```
Minute 1: 30m Sled Push
Minute 2: 40m Farmer's Carry
Minute 3: 10 Battle Rope Slams
Minute 4: 15s Assault Bike Sprint
Minute 5: 8 Kettlebell Swings (heavy)
(Repeat 3x)
```

### 5.2 AMRAP Templates

Each category has a 10-minute AMRAP focusing on sport-relevant movements with scoring for tracking improvement.

---

## 6. Database Schema Additions

### 6.1 New Equipment Values

Add to `EQUIPMENT_GLOSSARY` in seedData.ts:

```typescript
// Work Capacity Equipment
"battle_ropes",    // Battle rope conditioning
"ski_erg",         // Ski ergometer
"rower",           // Rowing machine / Concept2
"assault_bike",    // Air bike / Assault bike
"jump_rope",       // Speed rope for conditioning
```

### 6.2 New Tags

Add to `TAGS_GLOSSARY` in seedData.ts:

```typescript
// Work Capacity Purpose Tags
purpose: [
  ...existing,
  "work_capacity",     // General work capacity training
  "interval",          // Interval-based conditioning
  "circuit",           // Circuit training component
  "aerobic_capacity",  // Aerobic system development
  "anaerobic_capacity" // Anaerobic system development
]
```

### 6.3 Work Capacity Prescription Schema

New structure for circuit/interval prescriptions:

```typescript
interface WorkCapacityPrescription {
  type: "interval" | "circuit" | "steady_state";
  protocol?: "EMOM" | "AMRAP" | "Tabata" | "Ladder";

  // For intervals
  workDuration?: number;        // seconds
  restDuration?: number;        // seconds
  rounds?: number;

  // For circuits
  exercises?: {
    exerciseSlug: string;
    reps?: number | string;
    duration?: number;          // seconds
  }[];
  circuitRounds?: number;
  restBetweenRounds?: number;   // seconds

  // Scaling
  intensityTarget: "Low" | "Moderate" | "High";
  rpeTarget?: number;           // 1-10
}
```

---

## 7. Integration with Existing System

### 7.1 Day 3 Template Enhancement

Current Day 3 ("Power/Conditioning") structure:
1. Warmup (2 exercises)
2. Main Power Exercises (3-5 exercises)
3. Core (1-2 exercises)
4. Cooldown (1 exercise)

**Proposed Enhanced Structure:**
1. Warmup (2 exercises)
2. Power Development (2-3 explosive exercises)
3. **Work Capacity Block** (NEW - conditioning protocol)
4. Core (1 exercise - reduced due to work capacity addition)
5. Cooldown (1 exercise)

### 7.2 Work Capacity Block Options

Based on week and skill level:

| Week | Skill Level | Work Capacity Protocol |
|------|-------------|------------------------|
| 1 | Novice | 6-min steady state or simple intervals |
| 1 | Moderate | 8-min EMOM |
| 1 | Advanced | 10-min AMRAP |
| 2 | All | Increase duration by 2 min |
| 3 | All | Peak duration + intensity |
| 4 | All | Reduced duration, recovery focus |

### 7.3 Exercise Pool Updates for generateTemplates.ts

Add work capacity exercises to the power pools:

```typescript
power: {
  basic: [
    ...existing,
    "jump_rope_basic",
    "battle_rope_alternating_waves"
  ],
  moderate: [
    ...existing,
    "assault_bike_intervals",
    "ski_erg_pull",
    "battle_rope_double_waves"
  ],
  advanced: [
    ...existing,
    "battle_rope_slams",
    "rower_intervals",
    "jump_rope_double_unders"
  ]
}
```

---

## 8. Intensity Scaling Integration

### 8.1 Work Capacity Intensity Scaling

Add to `intensityScaling.ts`:

```typescript
export const WORK_CAPACITY_INTENSITY: Record<Intensity, {
  workDurationMultiplier: number;
  restMultiplier: number;
  roundsMultiplier: number;
  loadMultiplier: number;
  rpeRange: [number, number];
}> = {
  Low: {
    workDurationMultiplier: 0.75,
    restMultiplier: 1.25,
    roundsMultiplier: 0.75,
    loadMultiplier: 0.6,
    rpeRange: [5, 6]
  },
  Moderate: {
    workDurationMultiplier: 1.0,
    restMultiplier: 1.0,
    roundsMultiplier: 1.0,
    loadMultiplier: 0.75,
    rpeRange: [6, 7]
  },
  High: {
    workDurationMultiplier: 1.25,
    restMultiplier: 0.75,
    roundsMultiplier: 1.25,
    loadMultiplier: 0.85,
    rpeRange: [8, 9]
  }
};
```

### 8.2 Category-Specific Work Capacity Parameters

```typescript
export const CATEGORY_WORK_CAPACITY: Record<GppCategoryId, {
  primaryModality: string[];
  workToRestRatio: { GPP: string; SPP: string; SSP: string };
  volumeEmphasis: "high" | "moderate" | "low";
  intensityEmphasis: "high" | "moderate" | "low";
}> = {
  1: { // Endurance
    primaryModality: ["shuttle_sprint", "ski_erg", "tempo_run"],
    workToRestRatio: { GPP: "1:2", SPP: "1:1", SSP: "2:1" },
    volumeEmphasis: "high",
    intensityEmphasis: "moderate"
  },
  2: { // Power
    primaryModality: ["assault_bike_intervals", "jump_rope", "med_ball_circuit"],
    workToRestRatio: { GPP: "1:3", SPP: "1:2", SSP: "1:1" },
    volumeEmphasis: "moderate",
    intensityEmphasis: "high"
  },
  3: { // Rotation
    primaryModality: ["med_ball_rotational", "asymmetric_carries", "battle_ropes"],
    workToRestRatio: { GPP: "1:2", SPP: "1:1.5", SSP: "1:1" },
    volumeEmphasis: "moderate",
    intensityEmphasis: "moderate"
  },
  4: { // Strength
    primaryModality: ["sled_work", "heavy_carries", "battle_ropes"],
    workToRestRatio: { GPP: "1:3", SPP: "1:2", SSP: "1:1" },
    volumeEmphasis: "moderate",
    intensityEmphasis: "high"
  }
};
```

---

## 9. Implementation Phases

### Phase 1: Foundation (Week 1-2)
- [ ] Add new equipment to EQUIPMENT_GLOSSARY
- [ ] Add new tags to TAGS_GLOSSARY
- [ ] Add battle rope exercises to seedData.ts
- [ ] Add ski erg exercises to seedData.ts
- [ ] Add assault bike exercises to seedData.ts
- [ ] Add rower exercises to seedData.ts
- [ ] Add jump rope exercises to seedData.ts
- [ ] Create unit tests for new exercises

### Phase 2: Scaling System (Week 2-3)
- [ ] Add WORK_CAPACITY_INTENSITY to intensityScaling.ts
- [ ] Add CATEGORY_WORK_CAPACITY configuration
- [ ] Implement age-based modifications for work capacity
- [ ] Implement experience-based modifications
- [ ] Create unit tests for scaling functions

### Phase 3: Template Integration (Week 3-4)
- [ ] Update EXERCISE_POOLS in generateTemplates.ts with new exercises
- [ ] Create circuit protocol templates for each category
- [ ] Integrate work capacity block into Day 3 structure
- [ ] Update template generation logic
- [ ] Create unit tests for template generation

### Phase 4: UI/UX (Week 4-5)
- [ ] Design work capacity block UI in workout execution screen
- [ ] Add timer/interval functionality for circuits
- [ ] Create AMRAP/EMOM tracking interface
- [ ] Add work capacity metrics to session logging

### Phase 5: Testing & Polish (Week 5-6)
- [ ] End-to-end testing of complete workout flow
- [ ] Review prescriptions with training expertise
- [ ] Adjust intensity scaling based on feedback
- [ ] Performance optimization

---

## 10. Success Metrics

### User Engagement
- % of users completing Day 3 workouts (current vs. post-implementation)
- Average time spent on work capacity blocks
- Completion rate of circuit protocols

### Training Outcomes
- Week-over-week improvement in AMRAP scores
- Progression through skill levels
- Phase completion rates

### Technical
- Template generation performance
- Database query efficiency for new exercise types
- UI responsiveness during interval timers

---

## 11. Open Questions for Review

1. **Equipment Availability**: Should we implement equipment availability preferences in onboarding? (e.g., "I have access to: sled, battle ropes, ski erg...")

2. **Progression Triggers**: What should trigger advancement in work capacity (time-based, performance-based, or both)?

3. **RPE Collection**: Should we collect RPE for work capacity blocks separately from strength exercises?

4. **Video Content**: Priority for demonstration videos for work capacity exercises vs. strength exercises?

5. **Circuit Customization**: Should advanced users be able to modify circuit protocols, or keep them fixed for consistency?

---

## 12. References

- Existing intensity scaling: `/convex/intensityScaling.ts`
- Current exercise definitions: `/convex/seedData.ts`
- Template generation: `/convex/generateTemplates.ts`
- User program structure: `/convex/userPrograms.ts`
- Age-based rules: `AGE_INTENSITY_RULES` in intensityScaling.ts

---

*Document Version: 1.0*
*Created: 2026-01-28*
*Status: Ready for Review*
